<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ONLINE COURSES FREE</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light background for premium feel */
            color: #333;
            line-height: 1.6;
        }
        .gradient-bg {
            background: linear-gradient(to right, #6a11cb 0%, #2575fc 100%);
        }
        .btn-primary {
            @apply inline-block px-8 py-3 rounded-full text-white font-semibold transition-all duration-300 ease-in-out;
            background: linear-gradient(to right, #6a11cb 0%, #2575fc 100%);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        .card {
            @apply bg-white p-6 rounded-2xl shadow-lg transition-all duration-300 ease-in-out hover:shadow-xl;
        }
        /* Custom modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            max-width: 400px;
            width: 90%;
            text-align: center;
        }
        .modal-input {
            @apply w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-gray-800 mb-4;
        }
        .error-message {
            @apply text-red-600 text-sm mt-2;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col justify-center items-center p-4">

    <!-- Header Section -->
    <header class="w-full max-w-4xl mx-auto text-center py-10">
        <h1 class="text-5xl font-extrabold text-gray-900 leading-tight mb-4">
            <span class="gradient-bg bg-clip-text text-transparent">ONLINE COURSES FREE</span>
        </h1>
        <p class="text-xl text-gray-600">Unlock a world of knowledge with our premium courses. Subscribe now!</p>
    </header>

    <!-- Subscription Section -->
    <section class="w-full max-w-3xl mx-auto bg-white p-8 md:p-10 rounded-2xl shadow-xl mb-8 flex flex-col md:flex-row items-center justify-between">
        <div class="md:w-2/3 text-center md:text-left mb-6 md:mb-0">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">Gain Unlimited Access!</h2>
            <p class="text-lg text-gray-700 mb-4">
                To access all premium courses and live sessions, you need to purchase a subscription.
            </p>
            <p class="text-xl font-bold text-gray-800 mb-6">
                Subscription Fee:
                <span class="gradient-bg bg-clip-text text-transparent">150 PKR</span> (SadaPay) or
                <span class="gradient-bg bg-clip-text text-transparent">1 USD</span> (Binance)
            </p>
            <div class="mb-4">
                <h3 class="text-xl font-semibold text-gray-800 mb-2">Payment Details:</h3>
                <ul class="list-disc list-inside text-gray-700 space-y-1">
                    <li>SadaPay: <span class="font-mono">03446492768</span> (Name: Abdul RAZZAQ)</li>
                    <li>Binance ID: <span class="font-mono">907674656</span> (Name: MSARIM21)</li>
                </ul>
            </div>
            <p class="text-md text-gray-700">
                After payment, please click "Access Courses" and provide your details and screenshot.
            </p>
            <p class="text-lg font-semibold text-gray-800 mt-4">
                Contact: <span class="text-blue-600 font-bold">GAME CHANGER</span> - <span class="font-mono">+923326942269</span>
            </p>
        </div>
        <div class="md:w-1/3 flex justify-center">
            <button id="accessCoursesBtn" class="btn-primary text-xl">
                Access Courses
            </button>
        </div>
    </section>

    <!-- After Payment User Details Section (Initially hidden) -->
    <section id="afterPaymentSection" class="w-full max-w-3xl mx-auto bg-white p-8 md:p-10 rounded-2xl shadow-xl mb-8 hidden">
        <h2 class="text-3xl font-bold text-gray-800 mb-4 text-center">Confirm Your Subscription</h2>
        <p class="text-lg text-gray-700 mb-6 text-center">
            Please fill in your details and upload a screenshot of your payment.
            The owner will verify and grant you access.
        </p>
        <div class="space-y-4">
            <input type="text" id="userName" placeholder="Your Full Name" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-gray-800">
            <input type="text" id="userContact" placeholder="Your Phone Number / Email" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-gray-800">
            <label for="paymentScreenshot" class="block text-gray-700 font-semibold mb-2">Upload Payment Screenshot:</label>
            <input type="file" id="paymentScreenshot" accept="image/*" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-gray-800">
            <button id="submitPaymentDetailsBtn" class="btn-primary py-2 px-5 text-base w-full">Submit Details for Verification</button>
        </div>
        <p class="text-sm text-gray-500 mt-4 text-center">
            (In a real application, this form data and screenshot would be sent to a secure server for review.)
        </p>
    </section>

    <!-- YouTube Live Section -->
    <section class="w-full max-w-3xl mx-auto bg-white p-8 md:p-10 rounded-2xl shadow-xl mb-8 flex flex-col items-center text-center">
        <h2 class="text-3xl font-bold text-gray-800 mb-4">Join Our Live Sessions!</h2>
        <p class="text-lg text-gray-700 mb-6">
            Click the button below to watch me live on YouTube when I'm streaming.
        </p>
        <a id="youtubeLiveLink" href="http://www.youtube.com/@msarim2122" target="_blank" class="btn-primary text-xl flex items-center space-x-2">
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M19.615 3.106A2.791 2.791 0 0 0 17.65 2.14c-.645-.188-4.992-.375-7.65-.375S3.336 1.952 2.69 2.14A2.79 2.79 0 0 0 .725 3.106C.314 4.015 0 6.007 0 9.75v4.5C0 17.993.314 19.985.725 20.894a2.79 2.79 0 0 0 1.965.966c.645.188 4.992.375 7.65.375s7.005-.188 7.65-.375a2.791 2.791 0 0 0 1.965-.966c.411-.909.725-2.901.725-6.65v-4.5c0-3.743-.314-5.735-.725-6.644zM9.998 16.035V7.965L16.2 12l-6.202 4.035z"></path>
            </svg>
            <span>Watch Live on YouTube</span>
        </a>
        <p class="text-sm text-gray-500 mt-2">
            (The link defaults to your YouTube channel; actual live status detection requires YouTube API.)
        </p>
    </section>

    <!-- Admin Login Link -->
    <section class="w-full max-w-3xl mx-auto text-center mt-8">
        <button id="adminLoginBtn" class="text-blue-600 hover:underline text-sm focus:outline-none">
            Admin Login
        </button>
    </section>

    <!-- Display User ID (for debugging/multi-user context in Canvas) -->
    <div id="userIdDisplay" class="text-xs text-gray-400 mt-2"></div>

    <!-- Admin Panel (Initially hidden) -->
    <div id="adminPanel" class="w-full max-w-4xl mx-auto bg-gray-50 p-8 md:p-10 rounded-2xl shadow-inner mt-8 hidden">
        <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Admin Panel</h2>
        <p class="text-sm text-red-600 mb-6 text-center">
            *Warning: Data saved here will persist in Firestore, but payment verification is manual.*
        </p>

        <!-- Manage YouTube Live Link -->
        <div class="card mb-6">
            <h3 class="text-2xl font-semibold text-gray-800 mb-4">Manage Live Stream Link</h3>
            <div class="flex flex-col md:flex-row items-center md:space-x-4 space-y-4 md:space-y-0">
                <input type="text" id="youtubeLiveInput" placeholder="Enter YouTube Live URL" class="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-gray-800">
                <button id="updateLiveLinkBtn" class="btn-primary py-2 px-5 text-base">Update Live Link</button>
            </div>
            <p class="text-gray-600 text-sm mt-2">Current Live Link: <span id="currentLiveLink" class="font-mono text-blue-600">Loading...</span></p>
        </div>

        <!-- Add Course -->
        <div class="card mb-6">
            <h3 class="text-2xl font-semibold text-gray-800 mb-4">Add New Course</h3>
            <div class="space-y-4">
                <input type="text" id="courseTitle" placeholder="Course Title" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-gray-800">
                <textarea id="courseDescription" placeholder="Course Description" rows="3" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-gray-800"></textarea>
                <input type="text" id="courseLink" placeholder="Course Video/Material Link" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-gray-800">
                <button id="addCourseBtn" class="btn-primary py-2 px-5 text-base w-full">Add Course</button>
            </div>
        </div>

        <!-- Course List -->
        <div class="card">
            <h3 class="text-2xl font-semibold text-gray-800 mb-4">Existing Courses</h3>
            <ul id="courseList" class="space-y-4">
                <li class="text-gray-500 text-center">Loading courses...</li>
            </ul>
        </div>
    </div>

    <script type="module">
        // Firebase SDK imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, doc, addDoc, deleteDoc, onSnapshot, query, setDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        document.addEventListener('DOMContentLoaded', async () => {
            // Global variables provided by the Canvas environment
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
            const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
            const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

            // Initialize Firebase
            let app;
            let db;
            let auth;
            let userId = null;

            try {
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);

                // Sign in with custom token if available, otherwise anonymously
                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                    console.log("Signed in with custom token.");
                } else {
                    await signInAnonymously(auth);
                    console.log("Signed in anonymously.");
                }

                // Listen for auth state changes to get the user ID
                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        userId = user.uid;
                        document.getElementById('userIdDisplay').textContent = `User ID: ${userId}`;
                        console.log("Auth state changed. User ID:", userId);
                        // Start loading Firestore data once authenticated
                        loadFirestoreData();
                    } else {
                        userId = crypto.randomUUID(); // Generate a random ID if not authenticated
                        document.getElementById('userIdDisplay').textContent = `User ID: ${userId} (Anonymous)`;
                        console.log("Auth state changed. Anonymous User ID:", userId);
                        // Still load public data even if anonymous
                        loadFirestoreData();
                    }
                });

            } catch (error) {
                console.error("Error initializing Firebase or authenticating:", error);
                showCustomModal(`Failed to initialize application: ${error.message}. Please try again later.`, 'alert');
            }


            // UI elements
            const accessCoursesBtn = document.getElementById('accessCoursesBtn');
            const afterPaymentSection = document.getElementById('afterPaymentSection');
            const userNameInput = document.getElementById('userName');
            const userContactInput = document.getElementById('userContact');
            const paymentScreenshotInput = document.getElementById('paymentScreenshot');
            const submitPaymentDetailsBtn = document.getElementById('submitPaymentDetailsBtn');

            const adminLoginBtn = document.getElementById('adminLoginBtn');
            const adminPanel = document.getElementById('adminPanel');
            const youtubeLiveLink = document.getElementById('youtubeLiveLink');
            const youtubeLiveInput = document.getElementById('youtubeLiveInput');
            const updateLiveLinkBtn = document.getElementById('updateLiveLinkBtn');
            const currentLiveLinkSpan = document.getElementById('currentLiveLink');

            const courseTitleInput = document.getElementById('courseTitle');
            const courseDescriptionInput = document.getElementById('courseDescription');
            const courseLinkInput = document.getElementById('courseLink');
            const addCourseBtn = document.getElementById('addCourseBtn');
            const courseList = document.getElementById('courseList');
            const userIdDisplay = document.getElementById('userIdDisplay');

            const ADMIN_PASSWORD = "msarim7898"; // Admin password

            // Firestore paths
            const coursesCollectionPath = `artifacts/${appId}/public/data/courses`;
            const settingsDocumentPath = `artifacts/${appId}/public/data/settings/youtubeLive`;

            let courses = []; // Local array to hold courses fetched from Firestore

            // Function to render courses
            function renderCourses() {
                courseList.innerHTML = ''; // Clear existing list
                if (courses.length === 0) {
                    courseList.innerHTML = '<li class="text-gray-500 text-center">No courses added yet.</li>';
                    return;
                }
                courses.forEach(course => {
                    const li = document.createElement('li');
                    li.className = 'bg-gray-100 p-4 rounded-lg flex flex-col md:flex-row justify-between items-start md:items-center space-y-2 md:space-y-0';
                    li.innerHTML = `
                        <div>
                            <h4 class="text-xl font-semibold text-gray-900">${course.title}</h4>
                            <p class="text-gray-700 text-sm mt-1">${course.description}</p>
                            <a href="${course.link}" target="_blank" class="text-blue-600 hover:underline text-sm block mt-2">View Course Material</a>
                        </div>
                        <button data-id="${course.id}" class="delete-course-btn bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-full text-sm transition-colors duration-200 mt-3 md:mt-0">Delete</button>
                    `;
                    courseList.appendChild(li);
                });

                // Add event listeners to new delete buttons
                document.querySelectorAll('.delete-course-btn').forEach(button => {
                    button.addEventListener('click', async (event) => {
                        const courseId = event.target.dataset.id; // Firestore doc ID is a string
                        const courseTitle = courses.find(c => c.id === courseId)?.title; // Get title for confirmation message

                        showCustomModal(`Are you sure you want to delete "${courseTitle}"?`, 'confirm', async () => {
                            try {
                                if (db) { // Ensure db is initialized
                                    await deleteDoc(doc(db, coursesCollectionPath, courseId));
                                    console.log("Course deleted from Firestore:", courseId);
                                } else {
                                    console.error("Firestore not initialized.");
                                    showCustomModal("Error: Database not ready. Please try again.", 'alert');
                                }
                            } catch (e) {
                                console.error("Error deleting course:", e);
                                showCustomModal(`Failed to delete course: ${e.message}`, 'alert');
                            }
                        });
                    });
                });
            }

            // Function to show a custom confirmation/alert modal
            function showCustomModal(message, type = 'alert', onConfirmCallback = null) {
                const modalId = 'customModal';
                let modal = document.getElementById(modalId);
                if (!modal) {
                    modal = document.createElement('div');
                    modal.id = modalId;
                    modal.className = 'modal-overlay hidden';
                    modal.innerHTML = `
                        <div class="modal-content">
                            <p class="text-lg font-semibold mb-4" id="modalMessage"></p>
                            <div class="flex justify-center space-x-4" id="modalButtons">
                                <button id="modalConfirmBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-full transition-colors duration-200 hidden">Confirm</button>
                                <button id="modalCancelBtn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 px-5 py-2 rounded-full transition-colors duration-200">OK</button>
                            </div>
                        </div>
                    `;
                    document.body.appendChild(modal);
                }

                document.getElementById('modalMessage').textContent = message;
                const confirmBtn = document.getElementById('modalConfirmBtn');
                const cancelBtn = document.getElementById('modalCancelBtn');

                // Clean up previous event listeners to prevent multiple firings
                confirmBtn.onclick = null;
                cancelBtn.onclick = null;

                if (type === 'confirm') {
                    confirmBtn.classList.remove('hidden');
                    cancelBtn.textContent = 'Cancel';
                    confirmBtn.onclick = () => {
                        onConfirmCallback && onConfirmCallback();
                        modal.classList.add('hidden');
                    };
                } else { // 'alert'
                    confirmBtn.classList.add('hidden');
                    cancelBtn.textContent = 'OK';
                    cancelBtn.onclick = () => {
                        onConfirmCallback && onConfirmCallback();
                        modal.classList.add('hidden');
                    };
                }

                modal.classList.remove('hidden');
            }

            // Function to show the admin password modal
            function showAdminLoginModal() {
                const modalId = 'adminLoginModal';
                let modal = document.getElementById(modalId);
                if (!modal) {
                    modal = document.createElement('div');
                    modal.id = modalId;
                    modal.className = 'modal-overlay hidden';
                    modal.innerHTML = `
                        <div class="modal-content">
                            <h3 class="text-xl font-semibold mb-4">Admin Login</h3>
                            <input type="password" id="adminPasswordInput" placeholder="Enter Password" class="modal-input">
                            <p id="adminLoginError" class="error-message hidden">Incorrect password.</p>
                            <div class="flex justify-center space-x-4">
                                <button id="adminSubmitPasswordBtn" class="btn-primary py-2 px-5 text-base">Login</button>
                                <button id="adminCancelBtn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 px-5 py-2 rounded-full transition-colors duration-200">Cancel</button>
                            </div>
                        </div>
                    `;
                    document.body.appendChild(modal);
                }

                const passwordInput = document.getElementById('adminPasswordInput');
                const errorDisplay = document.getElementById('adminLoginError');
                const submitBtn = document.getElementById('adminSubmitPasswordBtn');
                const cancelBtn = document.getElementById('adminCancelBtn');

                passwordInput.value = ''; // Clear previous input
                errorDisplay.classList.add('hidden'); // Hide error message

                modal.classList.remove('hidden');

                const cleanup = () => {
                    submitBtn.onclick = null;
                    cancelBtn.onclick = null;
                    modal.classList.add('hidden');
                };

                submitBtn.onclick = () => {
                    if (passwordInput.value === ADMIN_PASSWORD) {
                        adminPanel.classList.remove('hidden');
                        showCustomModal("Welcome, Admin!", 'alert');
                        cleanup();
                    } else {
                        errorDisplay.classList.remove('hidden');
                    }
                };

                cancelBtn.onclick = () => {
                    cleanup();
                };
            }

            // --- Firestore Data Loading and Listeners ---
            function loadFirestoreData() {
                if (!db) {
                    console.warn("Firestore not ready, skipping data load.");
                    return;
                }

                // Listen for real-time updates to courses
                const coursesQuery = query(collection(db, coursesCollectionPath));
                onSnapshot(coursesQuery, (snapshot) => {
                    courses = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                    renderCourses();
                    console.log("Courses updated from Firestore.");
                }, (error) => {
                    console.error("Error fetching courses:", error);
                    showCustomModal(`Error loading courses: ${error.message}`, 'alert');
                });

                // Listen for real-time updates to YouTube Live link
                const settingsDocRef = doc(db, settingsDocumentPath);
                onSnapshot(settingsDocRef, (docSnap) => {
                    if (docSnap.exists()) {
                        const data = docSnap.data();
                        if (data && data.url) {
                            youtubeLiveLink.href = data.url;
                            currentLiveLinkSpan.textContent = data.url;
                            youtubeLiveInput.value = data.url; // Pre-fill admin input
                            console.log("YouTube Live link updated from Firestore:", data.url);
                        }
                    } else {
                        console.log("No YouTube Live link found in settings.");
                        youtubeLiveLink.href = "http://www.youtube.com/@msarim2122"; // Default
                        currentLiveLinkSpan.textContent = "http://www.youtube.com/@msarim2122"; // Default
                        youtubeLiveInput.value = "http://www.youtube.com/@msarim2122"; // Default
                    }
                }, (error) => {
                    console.error("Error fetching YouTube Live link:", error);
                    showCustomModal(`Error loading live link: ${error.message}`, 'alert');
                });
            }

            // --- Event Listeners ---

            // Simulate accessing courses: Show after payment form
            accessCoursesBtn.addEventListener('click', () => {
                showCustomModal("This button initiates the subscription process. Please proceed with payment and then fill the form.", 'alert', () => {
                    afterPaymentSection.classList.remove('hidden');
                    window.scrollTo({ top: afterPaymentSection.offsetTop, behavior: 'smooth' }); // Scroll to the form
                });
            });

            // Submit payment details (client-side simulation)
            submitPaymentDetailsBtn.addEventListener('click', () => {
                const name = userNameInput.value.trim();
                const contact = userContactInput.value.trim();
                const screenshotFile = paymentScreenshotInput.files[0];

                if (name && contact && screenshotFile) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const screenshotDataUrl = e.target.result; // Base64 data URL of the image
                        showCustomModal("plz check your details and contact owner on whatsaap +923326942269", 'alert');
                        // In a real application, you would send name, contact, and screenshotDataUrl to your backend
                        console.log("Submitted Details:", { name, contact, screenshot: screenshotDataUrl.substring(0, 50) + '...' });
                        // Clear the form
                        userNameInput.value = '';
                        userContactInput.value = '';
                        paymentScreenshotInput.value = ''; // Clear file input
                        afterPaymentSection.classList.add('hidden'); // Hide the form after submission
                    };
                    reader.readAsDataURL(screenshotFile); // Read file as Data URL
                } else {
                    showCustomModal("Please fill in your Name, Contact, and upload a Payment Screenshot.", 'alert');
                }
            });

            // Admin Login Button
            adminLoginBtn.addEventListener('click', () => {
                showAdminLoginModal();
            });

            // Update YouTube Live Link (to Firestore)
            updateLiveLinkBtn.addEventListener('click', async () => {
                const newLink = youtubeLiveInput.value.trim();
                if (newLink) {
                    try {
                        if (db) { // Ensure db is initialized
                            await setDoc(doc(db, settingsDocumentPath), { url: newLink });
                            console.log("YouTube Live link updated in Firestore:", newLink);
                            youtubeLiveInput.value = ''; // Clear input
                            showCustomModal("YouTube Live link updated successfully!", 'alert');
                        } else {
                            console.error("Firestore not initialized.");
                            showCustomModal("Error: Database not ready. Please try again.", 'alert');
                        }
                    } catch (e) {
                        console.error("Error updating live link:", e);
                        showCustomModal(`Failed to update live link: ${e.message}`, 'alert');
                    }
                } else {
                    showCustomModal("Please enter a valid YouTube Live URL.", 'alert');
                }
            });

            // Add new course (to Firestore)
            addCourseBtn.addEventListener('click', async () => {
                const title = courseTitleInput.value.trim();
                const description = courseDescriptionInput.value.trim();
                const link = courseLinkInput.value.trim();

                if (title && description && link) {
                    try {
                        if (db) { // Ensure db is initialized
                            const newCourseRef = await addDoc(collection(db, coursesCollectionPath), {
                                title,
                                description,
                                link,
                                createdAt: new Date() // Optional: add a timestamp
                            });
                            console.log("New course added to Firestore with ID:", newCourseRef.id);
                            courseTitleInput.value = '';
                            courseDescriptionInput.value = '';
                            courseLinkInput.value = '';
                            showCustomModal("New course added successfully!", 'alert');
                        } else {
                            console.error("Firestore not initialized.");
                            showCustomModal("Error: Database not ready. Please try again.", 'alert');
                        }
                    } catch (e) {
                        console.error("Error adding course:", e);
                        showCustomModal(`Failed to add course: ${e.message}`, 'alert');
                    }
                } else {
                    showCustomModal("Please fill in all course fields (Title, Description, Link).", 'alert');
                }
            });
        });
    </script>
</body>
</html>
